{% assign people = include.people | default: include.section | default: site.data.team %}
{% assign cols = include.cols | default: 'row-cols-2 row-cols-md-3 row-cols-lg-4' %}

<section class="team-grid py-5 {{ include.mt }} {{ include.mb }}">
  <div class="container">
    {% if include.title %}
      <h2 class="h3 text-center mb-4">{{ include.title }}</h2>
    {% endif %}

    <div class="row g-4 {{ cols }} justify-content-center">
      {% for p in people %}
      <div class="col">
        <div class="card h-100 text-center border-0">
          <div class="ratio ratio-1x1">
            {% assign src = p.photo %}
            {% if include.img_path and src %}{% assign src = include.img_path | append: src %}{% endif %}
            {% if src %}
              {% if p.link %}<a class="d-block" href="{{ p.link }}" target="_blank" rel="noopener">{% endif %}
                <img
                  src="{{ src | relative_url }}"
                  alt="{{ p.name }}"
                  class="w-100 h-100 object-fit-cover rounded"
                  loading="lazy">
              {% if p.link %}</a>{% endif %}
            {% else %}
              <!-- Fallback block if no photo -->
              <div class="d-flex align-items-center justify-content-center bg-body-tertiary text-secondary rounded">
                <span class="fw-medium">{{ p.name | slice: 0, 1 }}</span>
              </div>
            {% endif %}
          </div>
          <div class="card-body p-3">
            <h3 class="h6 mb-1">{{ p.name }}</h3>
            <div class="small text-secondary">{{ p.title }}</div>
            <div class="small text-secondary">{{ p.affiliation }}</div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
